# Agentmap Integration

This project uses **agentlens** for AI-optimized documentation.

## 0) Project Purpose / Stack / Navigation / Verification

- Project purpose: macOS menu bar client for managing CLIProxyAPI local proxy, provider OAuth, and quota workflows.
- Stack: Swift 6, SwiftUI, macOS 15+, Xcode 16+, Sparkle.
- Directory navigation:
  - App entry: `Quotio/QuotioApp.swift`
  - Core models: `Quotio/Models/`
  - Services: `Quotio/Services/`
  - View state: `Quotio/ViewModels/`
  - UI: `Quotio/Views/`
  - Build/release scripts: `scripts/`
- Common verification commands:
  - `./scripts/test.sh`
  - `xcodebuild -project Quotio.xcodeproj -scheme Quotio -configuration Debug build`
  - `./scripts/doc-ci-gate.sh`

## 1) Execution Contract (Fixed Loop)

Follow this order for every task:
1. `Observe`: identify entry points, affected state, and dependency impact.
2. `Change`: keep edits minimal and scoped to the request.
3. `Verify`: run smallest relevant checks first, then run docs/build gates when needed.
4. `Report`: include changed files, behavior delta, evidence, and risk notes.

## 2) Reading Protocol

Follow this order to understand the codebase efficiently:

1. **Start here**: `.agentlens/INDEX.md` - Project overview and module routing
2. **AI instructions**: `.agentlens/AGENT.md` - How to use the documentation
3. **Module details**: `.agentlens/modules/{module}/MODULE.md` - File lists and entry points
4. **Before editing**: Check `.agentlens/modules/{module}/memory.md` for warnings/TODOs

## 3) Documentation Structure

```
.agentlens/
â”œâ”€â”€ INDEX.md              # Start here - global routing table
â”œâ”€â”€ AGENT.md              # AI agent instructions
â”œâ”€â”€ modules/
â”‚   â””â”€â”€ {module-slug}/
â”‚       â”œâ”€â”€ MODULE.md     # Module summary
â”‚       â”œâ”€â”€ outline.md    # Symbol maps for large files
â”‚       â”œâ”€â”€ memory.md     # Warnings, TODOs, business rules
â”‚       â””â”€â”€ imports.md    # Dependencies
â””â”€â”€ files/                # Deep docs for complex files
```

## 4) During Development

- Use `.agentlens/modules/{module}/outline.md` to find symbols in large files
- Check `.agentlens/modules/{module}/imports.md` for dependencies
- For complex files, see `.agentlens/files/{file-slug}.md`

## 5) Commands

| Task | Command |
|------|---------|
| Regenerate docs | `agentlens` |
| Fast update (changed only) | `agentlens --diff main` |
| Check if stale | `agentlens --check` |
| Force full regen | `agentlens --force` |

## 6) Documentation Governance

- Policy: `docs/documentation-policy.md`
- Gate: `./scripts/doc-ci-gate.sh`

## 7) Key Patterns

- **Module boundaries**: `mod.rs` (Rust), `index.ts` (TS), `__init__.py` (Python)
- **Large files**: >500 lines, have symbol outlines
- **Complex files**: >30 symbols, have L2 deep docs
- **Hub files**: Imported by 3+ files, marked with ðŸ”—
- **Memory markers**: TODO, FIXME, WARNING, SAFETY, RULE

---
*Generated by [agentlens](https://github.com/nguyenphutrong/agentlens)*
